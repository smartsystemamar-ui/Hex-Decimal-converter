<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Hex to Decimal Converter + NFC</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 2em; background: #f4f4f9; }
    h1 { text-align: center; }
    .container { max-width: 600px; margin: auto; padding: 20px; background: #fff;
                 border-radius: 12px; box-shadow: 0 2px 6px rgba(0,0,0,0.15); }
    input { width: 100%; padding: 10px; margin: 10px 0; font-size: 1em; }
    button { padding: 10px 20px; margin: 10px 5px 0 0; font-size: 1em;
             border-radius: 8px; border: none; cursor: pointer; }
    #convertBtn { background: #007BFF; color: white; }
    #scanNFCBtn { background: #28a745; color: white; }
    #result { margin-top: 15px; padding: 10px; background: #eef; border-radius: 8px; }
    #error { color: red; margin-top: 10px; }
  </style>
</head>
<body>
  <div class="container">
    <h1>Hex to Decimal Converter</h1>
    <input type="text" id="hexInput" placeholder="Enter Hex value (e.g. 1A2B3C)"/>
    <button id="convertBtn">Convert</button>
    <button id="scanNFCBtn">Scan NFC</button>
    <div id="result"></div>
    <div id="error"></div>
  </div>

<script>
  const hexInput = document.getElementById('hexInput');
  const resultDiv = document.getElementById('result');
  const errorDiv = document.getElementById('error');

  function setError(msg) { errorDiv.textContent = msg; }

  function convert() {
    const hex = hexInput.value.trim();
    if (!hex) { setError("Please enter a hex value."); return; }
    try {
      const dec = BigInt("0x" + hex);
      resultDiv.innerHTML = "Decimal: <b>" + dec.toString() + "</b>";
      if (dec.toString().length === 8) {
        resultDiv.innerHTML += "<br/>This is an <b>8-digit</b> decimal.";
      } else if (dec.toString().length === 10) {
        resultDiv.innerHTML += "<br/>This is a <b>10-digit</b> decimal.";
      }
      setError("");
    } catch (err) {
      setError("Invalid hex input.");
    }
  }

  document.getElementById("convertBtn").addEventListener("click", convert);

  // NFC Integration (extended for text, URL, MIME)
  async function startNFC() {
    if (!("NDEFReader" in window)) {
      setError("Web NFC not supported on this device/browser.");
      return;
    }
    try {
      const ndef = new NDEFReader();
      await ndef.scan();
      setError("Hold an NFC tag near your device....");

      ndef.onreading = event => {
        let hexData = "";
        for (const record of event.message.records) {
          if (record.recordType === "text") {
            hexData = new TextDecoder().decode(record.data);
          } else if (record.recordType === "url" || record.recordType === "mime" || record.recordType === "unknown") {
            hexData = Array.from(new Uint8Array(record.data))
              .map(b => b.toString(16).padStart(2,"0"))
              .join("").toUpperCase();
          }
        }
        if(hexData){
          hexInput.value = hexData;
          convert();
          setError("NFC tag read successfully.");
        } else {
          setError("No usable hex data found in NFC tag.");
        }
      };
    } catch (err) {
      setError("NFC Error: " + err.message);
    }
  }

  document.getElementById("scanNFCBtn").addEventListener("click", startNFC);
</script>
</body>
</html>
